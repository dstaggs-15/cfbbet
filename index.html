<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>College Football Pick'em Tracker</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>College Football Pick'em Tracker</h1>
    <div class="header-actions">
      <button id="simulateBtn">Simulate Game Results</button>
      <button id="exportBtn" title="Download a backup of your picks">Export</button>
      <label class="import-label">
        Import
        <input type="file" id="importInput" accept=".json" hidden />
      </label>
    </div>
  </header>

  <!-- NEW: Instructions dropdown -->
  <section class="container">
    <details class="howto" open>
      <summary>How this works (click to toggle)</summary>
      <ol>
        <li><strong>Weekly games:</strong> edit <code>data/games.txt</code> (format: <code>Team A vs. Team B (+spread, O/U)</code>) and push. GitHub Action regenerates <code>public/games.json</code>.</li>
        <li><strong>Make picks:</strong> on each card, click the team button. You’ll see a gold highlight + “Selected: Team” badge. Enter a fake bet (e.g., 10) and hit <strong>Lock</strong>.</li>
        <li><strong>Settle results:</strong> type the final scores in the two score boxes and hit <strong>Settle</strong>. We grade ATS (add your spread to your picked team’s score).</li>
        <li><strong>Stats:</strong> right panel shows record (W-L-P), net profit, chart of bankroll over time, and a sortable history.</li>
        <li><strong>Offline + backups:</strong> site works offline (service worker). Your data stays in your browser (<code>localStorage</code>). Use <strong>Export</strong>/<strong>Import</strong> for backups.</li>
        <li><strong>Notes:</strong> odds are even-money for v1 (win +bet / loss −bet / push 0). We can switch to −110 vig if you want.</li>
      </ol>
    </details>
  </section>

  <main class="container">
    <section class="games">
      <h2>This Week's Games</h2>
      <div id="gameList" class="game-list"></div>
    </section>

    <aside class="sidebar">
      <div class="stats-card">
        <h3>Your Stats</h3>
        <div class="stat-line"><span>Record (W-L-P)</span><strong id="record">0-0-0</strong></div>
        <div class="stat-line"><span>Net Profit</span><strong id="profit">+$0.00</strong></div>
      </div>

      <div class="chart-card">
        <h3>Profit Over Time</h3>
        <canvas id="profitChart" height="180"></canvas>
      </div>

      <div class="history-card">
        <h3>Picks History</h3>
        <table id="historyTable">
          <thead>
            <tr>
              <th>Date</th>
              <th>Pick</th>
              <th>Bet</th>
              <th>Line</th>
              <th>O/U</th>
              <th>Result</th>
              <th>Profit</th>
            </tr>
          </thead>
          <tbody id="historyBody"></tbody>
        </table>
      </div>
    </aside>
  </main>

  <footer class="container">
    <small>Local practice only. Nothing here is real gambling. Works offline; your data stays in your browser.</small>
  </footer>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(() => {});
      });
    }
  </script>
</body>
</html>
